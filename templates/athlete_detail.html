{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('dashboard') }}">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li class="breadcrumb-item active">{{ athlete.full_name }}</li>
            </ol>
        </nav>
        
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>{{ athlete.full_name }}</h2>
            <a href="{{ url_for('generate_report', athlete_id=athlete.id) }}" class="btn btn-success">
                üìä –°–∫–∞—á–∞—Ç—å PDF –æ—Ç—á–µ—Ç
            </a>
        </div>
    </div>
</div>

<div class="row">
    <!-- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
    <div class="col-md-4">
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h5>
            </div>
            <div class="card-body">
                <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> {{ athlete.birth_date }} ({{ athlete.age }} –ª–µ—Ç)</p>
                <p><strong>–ü–æ–ª:</strong> {{ athlete.gender }}</p>
                <p><strong>–í–∏–¥ —Å–ø–æ—Ä—Ç–∞:</strong> {{ athlete.sport }}</p>
                <p><strong>–†–µ–≥–∏–æ–Ω:</strong> {{ athlete.region }}</p>
                <p><strong>–¢—Ä–µ–Ω–µ—Ä:</strong> {{ athlete.coach }}</p>
                <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ athlete.contact_phone }}</p>
            </div>
        </div>
    </div>

    <!-- –§–∏–∑–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ -->
    <div class="col-md-8">
        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">–§–∏–∑–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>–ú–ü–ö (VO2max):</strong> 
                            <span class="badge {% if athlete.physical_data.vo2max > 65 %}bg-success{% else %}bg-warning{% endif %}">
                                {{ athlete.physical_data.vo2max }} –º–ª/–∫–≥/–º–∏–Ω
                            </span>
                        </p>
                        <p><strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∏–ª–∞:</strong> {{ athlete.physical_data.max_strength }} –∫–≥</p>
                        <p><strong>–ë–µ–∑–∂–∏—Ä–æ–≤–∞—è –º–∞—Å—Å–∞ —Ç–µ–ª–∞:</strong> {{ athlete.physical_data.lean_body_mass }} –∫–≥</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>–ü–ê–ù–û:</strong> {{ athlete.physical_data.anaerobic_threshold }} –º–º–æ–ª—å/–ª</p>
                        <p><strong>–ß–°–° –≤ –ø–æ–∫–æ–µ:</strong> {{ athlete.physical_data.resting_hr }} —É–¥/–º–∏–Ω</p>
                        <p><strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ß–°–°:</strong> {{ athlete.physical_data.max_hr }} —É–¥/–º–∏–Ω</p>
                        <p><strong>–£–¥–∞—Ä–Ω—ã–π –æ–±—ä–µ–º —Å–µ—Ä–¥—Ü–∞:</strong> {{ athlete.physical_data.stroke_volume }} –º–ª</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ -->
    <div class="col-md-6">
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ</h5>
            </div>
            <div class="card-body">
                <p><strong>–ì—Ä—É–ø–ø–∞ –∫—Ä–æ–≤–∏:</strong> {{ athlete.medical_data.blood_type }}</p>
                <p><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ–¥–æ—Å–º–æ—Ç—Ä:</strong> {{ athlete.medical_data.last_medical_check }}</p>
                <p><strong>–¢—Ä–∞–≤–º—ã:</strong> {{ athlete.medical_data.injuries }}</p>
                <p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</strong> {{ athlete.medical_data.recommendations }}</p>
                <p><strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏—è –≤—Ä–∞—á–∞:</strong> {{ athlete.medical_data.doctor_notes }}</p>
            </div>
        </div>
    </div>

    <!-- –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—Ü–µ–Ω–∫–∏ -->
    <div class="col-md-6">
        <div class="card mb-4">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—Ü–µ–Ω–∫–∏</h5>
            </div>
            <div class="card-body">
                <p><strong>–ú–æ—Ç–∏–≤–∞—Ü–∏—è:</strong> 
                    {% for i in range(10) %}
                        <span class="text-{% if i < athlete.psychological_data.motivation %}warning{% else %}muted{% endif %}">‚òÖ</span>
                    {% endfor %}
                    ({{ athlete.psychological_data.motivation }}/10)
                </p>
                <p><strong>–°—Ç—Ä–µ—Å—Å–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:</strong> {{ athlete.psychological_data.stress_resistance }}/10</p>
                <p><strong>–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è:</strong> {{ athlete.psychological_data.concentration }}/10</p>
                <p><strong>–ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞:</strong> {{ athlete.psychological_data.teamwork }}/10</p>
                <p><strong>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:</strong> {{ athlete.psychological_data.discipline }}/10</p>
                <p><strong>–î–∞—Ç–∞ –æ—Ü–µ–Ω–∫–∏:</strong> {{ athlete.psychological_data.assessment_date }}</p>
            </div>
        </div>
    </div>
</div>

<!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-dark text-white">
                <h5 class="mb-0">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞</th>
                                <th>–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ</th>
                                <th>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</th>
                                <th>–ú–µ—Å—Ç–æ</th>
                                <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for result in athlete.competition_results %}
                            <tr>
                                <td>{{ result.date }}</td>
                                <td>{{ result.competition }}</td>
                                <td>{{ result.event }}</td>
                                <td>
                                    <span class="badge {% if result.place <= 3 %}bg-success{% else %}bg-secondary{% endif %}">
                                        {{ result.place }}
                                    </span>
                                </td>
                                <td>{{ result.result }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
